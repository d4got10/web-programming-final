{% from 'header.html' import header %}
<!DOCTYPE html>
<html lang="en">
{{ header("Каталог", current_user) }}
<body>
<div class="container-fluid">
    <div class="row flex-nowrap">
        <div class="col-md-2 col-xl-2 px-0 bg-dark d-flex flex-column align-items-center align-items-sm-start text-white"
             style="height: 94vh">
            <div class="w-100 pt-4 pb-4 p-2">
                <p>{{ course.name }}</p>
            </div>
                {% for task in task_list %}
                    <li class="nav nav-pills flex-column mb-sm-auto mb-0 w-100 align-items-center align-items-sm-start" id="menu">
                        <a class="text-white"
                               href="{{ url_for('edit_tasks_of_course', id=course.id, selected_task_id=task.id) }}">{{ task.name }}</a>
                    </li>
                {% endfor %}
        <button id="show-form-btn">Показать форму</button>
            <div class="w-100 pt-4 pb-4 p-2">
            </div>
        </div>
        <div class="col py-3">
            {% if selected_task.task_type == 1 %}
                <p>Задание с одним вариантом ответа</p>
            {% elif selected_task.task_type == 2 %}
                <p>Задание с несколькими вариантами ответа</p>
            {% else %}
                <p>Задание с текстовым вариантом ответа</p>
            {% endif %}
            {% if selected_task %}
                <div class="col py-3">
                <form action="/edit_tasks_of_course/{{ course.id }}" method="POST">
                        <textarea style=
                            "margin-bottom: 0.5rem;
                    display: flex;
                    font-weight: 500;
                    font-size: 1.25rem;
                    line-height: 1.2;" cols="50" rows="3" name="task_description" type="text" value="{{ selected_task.description }}">{{ selected_task.description }}
                        </textarea>
                        <textarea style=
                            "margin-bottom: 0.5rem;
                    display: flex;
                    font-weight: 500;
                    font-size: 1.25rem;
                    line-height: 1.2;" cols="50" rows="3" name="task_name" type="text" value="{{ selected_task.name }}">{{ selected_task.name }}
                        </textarea>
                        <input type="hidden" name="selected_task_id" value="{{ selected_task.id }}" >
                        <input type="submit" class="btn-success w-40 text-center rounded-pill" name="submit-edit-task-description" value="Изменить описание задания" >
                        <input type="submit" class="btn-success w-40 text-center rounded-pill" name="submit-delete-task" value="Удалить задание" >
                </form>
                </div>
            {% endif %}
        <div class="col py-3">
            <form id="new_task_form" action="/edit_tasks_of_course/{{ course.id }}" method="POST" style="display: none">
                    <textarea style=
                        "margin-bottom: 0.5rem;
                display: flex;
                font-weight: 500;
                font-size: 1.25rem;
                line-height: 1.2;" cols="50" rows="3" name="task_description" type="text" value="">
                    </textarea>
                    <textarea style=
                        "margin-bottom: 0.5rem;
                display: flex;
                font-weight: 500;
                font-size: 1.25rem;
                line-height: 1.2;" cols="50" rows="3" name="task_name" type="text" value="">
                    </textarea>
                    <input type="submit" class="btn-success w-40 text-center rounded-pill" name="new-task" value="Создать новое задание" >
            </form>
        </div>
        </div>
    </div>
</div>
<script>
    const showFormBtn = document.getElementById("show-form-btn");
    const myForm = document.getElementById("new_task_form");

    showFormBtn.addEventListener("click", () => {
      myForm.style.display = "block";
    });

{#    myForm.addEventListener("submit", (event) => {
      event.preventDefault(); // Отменяем стандартное поведение формы при отправке
      myForm.style.display = "none";
    });#}

</script>
</body>
</html>