{% from 'header.html' import header %}
<!DOCTYPE html>
<html lang="ru">
{{ header("Каталог", current_user) }}
<body>
<div class="container-fluid">
    <div class="row flex-nowrap">
        <div class="col-md-2 col-xl-2 px-0 bg-dark d-flex flex-column align-items-center align-items-sm-start text-white"
             style="height: 94vh">
            <div class="w-100 pt-4 pb-4 p-2">
                <p>{{ course.name }}</p>
                <p>Дата начала: {{ attempt.start_date }}</p>
                <p id="demo"></p>
            </div>
            <ul class="nav nav-pills flex-column mb-sm-auto mb-0 w-100 align-items-center align-items-sm-start"
                id="menu">
                {% for task in task_list %}
                    <li class="nav-item bg-success text-center w-100 pt-3 pb-3 border-dark border-bottom">
                        <a class="text-white"
                           href="{{ url_for('attempt', id=attempt.id, selected_task=loop.index) }}">{{ task.name }}</a>
                    </li>
                {% endfor %}
            </ul>
        </div>
        <div class="col py-3">
            <p>{{ selected_task.description }}</p>
        </div>
    </div>
</div>
<script>
    var countDownDate = new Date("{{ attempt.end_date }}").getTime();

    // Update the count down every 1 second
    var x = setInterval(function () {

        // Get today's date and time
        var now = new Date().getTime();

        // Find the distance between now and the count down date
        var distance = countDownDate - now;

        // Time calculations for days, hours, minutes and seconds
        var days = Math.floor(distance / (1000 * 60 * 60 * 24));
        var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        var seconds = Math.floor((distance % (1000 * 60)) / 1000);

        // Display the result in the element with id="demo"
        document.getElementById("demo").innerHTML = days + "d " + hours + "h "
            + minutes + "m " + seconds + "s ";

        // If the count down is finished, write some text
        if (distance < 0) {
            clearInterval(x);
            document.getElementById("demo").innerHTML = "EXPIRED";
        }
    }, 1000);
</script>
</body>
</html>